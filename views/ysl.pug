<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="../static/bootstrap/css/bootstrap.min.css">
<link href="../static/fontawesome/css/all.css" rel="stylesheet">
style
  include ../static/websitecss/device-roms.css

<title>KUSTOM</title>
</head>
<body>
  <div class="container1">
    <div class="banner"><button onclick="document.getElementById('user-popup-wrapper-responsive').style.display='block';" class="options-responsive"><i class="fas fa-bars"></i></button><h1 align=left><i class="fab fa-android fa-2x"></i>KUSTOMROM<font color="#DCDCDC">.com</font></h1>
    </div>
    <div class="dropdown"><button class="btn"><i class="fas fa-rss-square"></i> NEWS <i class="fas fa-angle-down"></i></span></button></h1>
      <div class="dropdown1-content">
        <a href="#">Link 1</a>
        <a href="#">Link 2</a>
        <a href="#">Link 3</a>
      </div>
    </div>
    <div class="dropdown"><button class="btn"><i class="fas fa-mobile-alt"></i> DEVICES <i class="fas fa-angle-down"></i></button>
      <div class="dropdown1-content">
        <table>
          <tr>
            <td><a href="/samsung">SAMSUNG</a></td>
            <td><a href="#">HTC</a></td>
            <td><a href="/xiaomi">Xiaomi</a></td>
          </tr>
          <tr>
            <td><a href="#">OPPO</a></td>
            <td><a href="#">VIVO</a></td>
            <td><a href="/oneplus">ONE_PLUS</a></td>
          </tr>
          <tr>
            <td><a href="#">RAZOR</a></td>
            <td><a href="/motorola">MOTOROLA</a></td>
            <td><a href="/google">GOOGLE</a></td>
          </tr>
        </table>
      </div>
    </div>
    <div class="dropdown"><button class="btn"><i class="fab fa-forumbee"></i> FORUMS <i class="fas fa-angle-down"></i></button>
      <div class="dropdown1-content">
        <a href="#">Link 7</a>
        <a href="#">Link 8</a>
        <a href="#">Link 9</a>
      </div>
    </div>
    <div class="dropdown"><button class="btn bestposts"><i class="fas fa-coffee"></i> BEST POSTS <i class="fas fa-angle-down"></i></button>
      <div class="dropdown1-content">
        <a href="#">Link 10</a>
        <a href="#">Link 11</a>
        <a href="#">Link 12s</a>
      </div>
    </div>
    <div class="dropdown"><button class="btn"> <i class="fas fa-user-tie"></i> DEVELOPERS</button>
    </div>
    <div class="parent-search-box">
      <input type="text" class="parent-search-txt" id="parent-search-txt" placeholder="Type to search">
      <i class="fab fa-searchengin parent-search-btn"></i>
      <div class="search-result-box">
        <span style="color:thistle;padding:15px;margin: 10px 0px;">Search Results</span>
        <hr style="background-color:thistle;margin-top:5px;width:90%;">
        <ul id="allSearchResults">
          //-all search results here
        </ul>
      </div>
    </div>
  </div>

  <div class="slider-container">
    <span id="slider-image-1"></span>
    <span id="slider-image-2"></span>
    <span id="slider-image-3"></span>
    <div class="image-container">
      <img src="./static/slider/havoc640x360.jpg" class="slider-image">
      <img src="./static/slider/lineage640x360.jpg" class="slider-image">
      <img src="./static/slider/oxygen640x360.jpg" class="slider-image">
      <img src="./static/slider/evolution640x360.jpg" class="slider-image">
      <img src="./static/slider/corvus640x360.jpg" class="slider-image">
    </div>
    <div class="button-container">
      <a href="#slider-image-1" class="slider-button"></a>
      <a href="#slider-image-2" class="slider-button"></a>
      <a href="#slider-image-3" class="slider-button"></a>
    </div>
  </div>

  <div class="content clearfix">
    <div class="main-content">
      <div class="search-box">
        <input type="text" id="search-txt" class="search-txt" placeholder="Type to search">
        <i class="fas fa-search search-btn"></i>
      </div>

      <ul class="alltemplates" id="templateList">
        <li class="rom">
        </li>
      </ul>
      //here are the templates
    </div>


    <div class="side-content">
      <h5 class="side-post-title">&nbsp; ysl feed</h5>
      <div class="side-post">
        <a href="#"><img src="./static/postimages/p5.jpg" alt="" class="side-post-image"></a>
        <div class="side-post-preview">
        <a class="sidepostlink" href="#">India bans Xiaomi’s Mi Browser Pro, and QQ International app</a> 
        <p class="side-preview-text">
        The Government of India recently had banned and blocked access to 59 apps with Chinese connections like TikTok, Xiaomi’s Mi Community, Mi Video Call, Xender, Shareit, Cam Scanner and even...
        </p>
      </div>
      </div>
      <div class="side-post">
        <a href="#"><img src="./static/postimages/p9.jpg" alt="" class="side-post-image"></a>
        <div class="side-post-preview">
          <a class="sidepostlink" href="#">Motorola One Fusion+ Review – A harmonious blend of the right mid-range features.</a> 
          <p class="side-preview-text">For the last couple of years, Motorola has given its undivided attention to its portfolio of budget and mid-range smartphones. With a shift away from its flagship Moto Z line,…</p>
        </div>
      </div>
      <div class="side-post">
        <a href="#"><img src="./static/postimages/p10.jpg" alt="" class="side-post-image"></a>
        <div class="side-post-preview">
          <a class="sidepostlink" href="#">OnePlus Nord Review: Great Performance at a Great Price</a> 
          <p class="side-preview-text">Every OnePlus smartphone since the 2014 OnePlus One has featured a flagship Qualcomm Snapdragon 800 series chipset. The use of Qualcomm's latest silicon has been integral to OnePlus' marketing, as…</p>
        </div>
      </div>
  </div>





  <div class="side-bar">
    <h2><button class="options"><i class="fas fa-bars"></i></button>
    <button onclick="document.getElementById('user-popup-wrapper').style.display='block'" class="user"><i class="fas fa-user-circle"></i></button></h2>
    <div class="social-links">
      <a href="www.facebook.com"><img src="./static/logo/fb.png"></a>
      <a href="www.instagram.com"><img src="./static/logo/insta.png"></a>
      <a href="www.twitter.com"><img src="./static/logo/twitter.png"></a>
    </div>
    <div class="useful-links">
      <a href="#"><img src="./static/logo/share.png"></a>
      <a href="#"><img src="./static/logo/info.png"></a>
    </div>
  </div>


  <div id="user-popup-wrapper-responsive" class="user-popup-responsive">
    <button onclick="document.getElementById('user-popup-wrapper-responsive').style.display='none';" class="close"><i class="fas fa-times-circle"></i></button>
    if(isAuthenticated)  
      if user.usertype == 'local'    
        <div class="user-popup-content">
          <div class="dpcontainer"><img style="width:150px;height:150px;border-radius:50%;" src="./static/uploads/#{user.filename}" ></div>
          <div class="usernaming">
            <p style="margin-top:0;color:white;font-size:1rem;">#{ user.username }</p>
          </div>
          <a href="/logout" class="logout"><i class="fas fa-sign-out-alt"></i> Log Out</a><br>
          <a href="#" class="settings"><i class="fas fa-cogs"></i></i> Settings</a>
        </div>
      else if user.usertype == 'developer'
        <div class="user-popup-content">
          <div class="dpcontainer"><img style="width:150px;height:150px;border-radius:50%;" src="./static/uploads/#{user.filename}" ></div>
          <div class="usernaming">
            <p style="margin-top:0;color:white;font-size:1rem;">#{ user.username }</p>
          </div>
          <p style="margin-top:0;color:white;font-size:1rem;">User-Type: #{ user.usertype }</p>
          <a href="/logout" class="logout"><i class="fas fa-sign-out-alt"></i> Log Out</a><br>
          <a href="#" class="settings"><i class="fas fa-cogs"></i> Settings</a><br>
          <a href="/dashboard" class="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
        </div>
    else
      <div class="user-popup-content">

        div.col-10.ml-sm-auto.px-4
          if error != 0
            div.alert.alert-danger.alert-dismissible.fade.show #{ error }
          if typeof errors != 'undefined'
            for error in errors
              div.alert.alert-danger.alert-dismissible.fade.show #{ error.msg }
          if success_msg != 0
            div.alert.alert-success.alert-dismissible.fade.show #{ success_msg }
          if error_msg != 0
            div.alert.alert-danger.alert-dismissible.fade.show #{ error_msg }
        <form action="/login" method='POST'>
          <div class="login-data">
            <span style="color:thistle;font-size:large;"><i class="far fa-user"></i> Hello!, Sign in</span>
            <input type="email" id="email" name="email" class="email" placeholder="Your @email ">
            <input type="password" id="password" name="password" placeholder="password">
            <p align="right"><a href="#" class="forgotpassword">forgot password?</a></p>
            <a href="/login" ><button type="submit" name="login" class="login">LOGIN</button></a>
            <a href="/registration" class="register">Register</a><span style="color:#DCDCDC;"> or </span><a href="#" class="loginwithgoogle">Login with google</a>
          </div>
        </form>
      </div>
    <div class="social-box">
    <span style="color:thistle;font-size:small;">RESOURCES</span>
      <ul>
        <li><a>Contact Us</a></li>
        <li><a>About Us</a></li>
        <li><a>Tip Us</a></li>
      </ul>
    </div>
    <div class="social-box">
      <span style="color:thistle;font-size:small;">SOCIAL</span>
      <div class="icons">
        <a class="social-icons"><i class="fab fa-facebook-square"></i></a>
        <a class="social-icons"><i class="fab fa-telegram"></i></a>
        <a class="social-icons"><i class="fab fa-twitter-square"></i></a>
        <a class="social-icons"><i class="fas fa-share-alt-square"></i></a>
      </div>
    </div>
  </div>

  <div id="user-popup-wrapper" class="user-popup">
    <button onclick="document.getElementById('user-popup-wrapper').style.display='none';" class="close"><i class="fas fa-times-circle"></i></button>
    if(isAuthenticated)  
      if user.usertype == 'local'    
        <div class="user-popup-content">
        <div class="dpcontainer"><img style="width:150px;height:150px;border-radius:50%;" src="./static/uploads/#{user.filename}" ></div>
        <div class="usernaming">
          <p style="margin-top:0;color:white;font-size:1rem;">#{ user.username }</p>
        </div>
          <a href="/logout" class="logout"><i class="fas fa-sign-out-alt"></i> Log Out</a><br>
          <a href="#" class="settings"><i class="fas fa-cogs"></i></i> Settings</a>
        </div>
      else if user.usertype == 'developer'
        <div class="user-popup-content">
        <div class="dpcontainer"><img style="width:150px;height:150px;border-radius:50%;" src="./static/uploads/#{user.filename}" ></div>
        <div class="usernaming">
        <p style="margin-top:0;color:white;font-size:1rem;">#{ user.username }</p>
        </div>
        <p style="margin-top:0;color:white;font-size:1rem;">User-Type: #{ user.usertype }</p>
        <a href="/logout" class="logout"><i class="fas fa-sign-out-alt"></i> Log Out</a><br>
        <a href="#" class="settings"><i class="fas fa-cogs"></i> Settings</a><br>
        <a href="/dashboard" class="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
        </div>
    else
      <div class="user-popup-content">

      div.col-10.ml-sm-auto.px-4
        if error != 0
          div.alert.alert-danger.alert-dismissible.fade.show #{ error }
        if typeof errors != 'undefined'
          for error in errors
            div.alert.alert-danger.alert-dismissible.fade.show #{ error.msg }
        if success_msg != 0
          div.alert.alert-success.alert-dismissible.fade.show #{ success_msg }
        if error_msg != 0
          div.alert.alert-danger.alert-dismissible.fade.show #{ error_msg }
      <form action="/login" method='POST'>
        <div class="login-data">
          <input type="email" id="email" name="email" class="email" placeholder="Your @email ">
          <input type="password" id="password" name="password" placeholder="password">
          <p align="right"><a href="#" class="forgotpassword">forgot password?</a></p>
          <a href="/login" ><button type="submit" name="login" class="login">LOGIN</button></a>
          <a href="/registration" class="register">Register</a><span style="color:#DCDCDC;"> or </span><a href="#" class="loginwithgoogle">Login with google</a>
        </div>
      </form>
      </div>
    </div>
  </div>

  <div class="footer">
    <div class="footer-content">
      <div class="footer-section about">
        <h1><i class="fab fa-android fa-2x"></i>KUSTOMROM<font color="#DCDCDC">.com</font></h1>
        <p style="color:#DCDCDC;">This is a community where you will find custom rom for your devices. Flash Happiness!!</p>
        <div class="contact">
          <span style="color:#DCDCDC;"><i class="fas fa-phone-square-alt"></i> &nbsp; 933-703-5249</span><br>
          <span style="color:#DCDCDC;"><i class="far fa-paper-plane"></i>&nbsp; thisisniraj2@gmail.com</span>
        </div>
      </div>
      <div class="footer-section links">
        <h6>Quick Links</h6>
        <br>
          <a href="#">Guides</a>
          <a href="#">ROM</a>
          <a href="#">Devices</a>
          <a href="#">News</a>
      </div>
      <div class="footer-section subscribe">
        <h7>Subscribe to KUSTOM</h7>
        <p style="color: #DCDCDC; font-size:1rem; text-align:left;width:90%;">Receive the freshest Android & development news right in your inbox!</p>
        <form action="subscribe.html" method="post">
          <input type="email" name="email" class="contact-input" placeholder="your@email"><br>
          <button style="margin-left:10px;color:#DCDCDC;background-color:#0AC5A8;padding: 4px 4px;border:none;border-radius:5px;"type="submit" class="submit"><i class="fas fa-smile-beam"></i> Subscribe</button>
        </form>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; kustomrom.com | Designed by Niraj Sharma</p>
    </div>
  </div>
  script.
    window.onload = function(){
      const templates = document.querySelector('.alltemplates');
      //const templates2 = document.querySelector('.second');
      function appendTemplate(data){
      let liTag = document.createElement('li');
      liTag.classList.add('rom')
      let markup=`
      <div class="rom-content">
      <div class="rom-section image">
      <a href="#"><img src="./static/uploads/${data.filename}" alt="havoc-os" class="rom-images"></a>
      </div>
      <div class="rom-section info">
      <ul class="info-ul">
      <li>Rom: <span style="color:#0ac5a8;display:inline-block;">${data.projectname}</span></li>
      <li>Android: ${data.androidversion}</li>
      <li>Rom version: ${data.romversion}</li>
      <li>Device: ${data.device}</li>
      <li>Release Date: <span style="color:#0ac5a8;display:inline-block;">${data.date}</span> </li>
      <li>Downloads: 0</li>
      </ul>
      <a href="/${data.projectname}-${data.device}"><button class="knowmore"><i class="fas fa-angle-double-left"></i> Know more <i class="fas fa-angle-double-right"></i></button></a>
      </div>
      <div class="rom-section devinfo">
      <fieldset class="rom-fieldset" >
      <legend class="rom-legend" >Developer</legend>
      <img src="./static/uploads/${data.developerpicture}" class="dev-image">
      <p>Name: ${data.username}<br>Joined on: ${data.joindate}</p>
      </fieldset>
      </div>
      </div>

      `
      liTag.innerHTML+=markup;
      templates.prepend(liTag);

      }
      fetchTemplates();
      function fetchTemplates(){
        fetch('/api/ysltemplates')
          .then(res => res.json())
          .then(result => {
            for(i=0;i<result.length;i++){
              console.log(result[i])
              appendTemplate(result[i]);
            }
          })
      }
    }
script.
  const templateList = document.getElementById('templateList');
  const searchBar = document.getElementById('search-txt');
  let templates=[];
  searchBar.addEventListener('keyup',(e)=>{
    const searchString = e.target.value.toLowerCase();
    const filteredTemplates = templates.filter(key=>{
      return(
        key.projectname.toLowerCase().includes(searchString) || 
        key.androidversion.includes(searchString)
      );
    });
    displayTemplates(filteredTemplates);
    console.log(filteredTemplates);
  });
  fetchTemplates();
    function fetchTemplates(){
      fetch('/api/ysltemplates')
        .then(res => res.json())
        .then(result => {
          templates=result;
        })
    }
  function displayTemplates(templates){
    const htmlString= templates
      .map((data)=>{
        return `
          <li class="rom">
          <div class="rom-content">
          <div class="rom-section image">
          <a href="#"><img src="./static/uploads/${data.filename}" class="rom-images"></a>
          </div>
          <div class="rom-section info">
          <ul class="info-ul">
          <li>Rom: <span style="color:#0ac5a8;display:inline-block;">${data.projectname}</span></li>
          <li>Android: ${data.androidversion}</li>
          <li>Rom version: ${data.romversion}</li>
          <li>Device: ${data.device}</li>
          <li>Release Date: <span style="color:#0ac5a8;display:inline-block;">${data.date}</span> </li>
          <li>Downloads: 0</li>
          </ul>
          <a href="/${data.projectname}"><button class="knowmore"><i class="fas fa-angle-double-left"></i> Know more <i class="fas fa-angle-double-right"></i></button></a>
          </div>
          <div class="rom-section devinfo">
          <fieldset class="rom-fieldset" >
          <legend class="rom-legend" >Developer</legend>
          <img src="./static/uploads/${data.developerpicture}" class="dev-image">
          <p>Name: ${data.username}<br>Joined on: ${data.joindate}</p>
          </fieldset>
          </div>
          </div>
          </li>
        `;
      })
      templateList.innerHTML=htmlString;
  }
  const resultList = document.getElementById('allSearchResults');
  const parentSearchBar = document.getElementById('parent-search-txt');
  let tags=[];
  parentSearchBar.addEventListener('keyup',(e)=>{
    document.querySelector('.search-result-box').style.display='block';
    //console.log(e);
    const searchString = e.target.value.toLowerCase();
    const filteredTags = tags.filter(key=>{
      return(
        key.heading.toLowerCase().includes(searchString) || 
        key.description.toLowerCase().includes(searchString)
      );
    });
    //console.log(filteredTags);
    displayTags(filteredTags);
  });
  fetchTags();
    function fetchTags(){
      fetch('/api/searchTags')
        .then(res => res.json())
        .then(result => {
          tags=result;
        })
    }
  function displayTags(tags){
    //console.log(parentSearchBar.value.length)
    if(tags.length==0){
      const htmlString=  `
        <li class="searchresults">
          <span style="color:thistle;">No Results</span>
        </li>
        `;
      resultList.innerHTML=htmlString;
    }
    else if(parentSearchBar.value.length==0){
      document.querySelector('.search-result-box').style.display='none';
    }
    else{
      const htmlString= tags
      .map((data)=>{
        return `
          <li class="searchresults">
            <a class="result-heading" href=${data.link}>${data.heading}[${data.date}]</a>
            <a class="result-description" href=${data.link}>${data.description}</a>
          </li>
        `;
      })
      resultList.innerHTML=htmlString;
    }
  }






</body>
</html>